<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parreira ERP | Core</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <!-- Using new consolidated style -->
    <link rel="stylesheet" href="styles/erp.css?v=2.4.0">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo-area">
                <span class="material-icons-round" style="font-size: 1.5rem;">hub</span>
                <h1 style="font-size: 1.25rem;">Parreira ERP</h1>
            </div>

            <nav class="nav-menu">
                <a class="nav-item active" onclick="switchView('dashboard')">
                    <span class="material-icons-round">dashboard</span>
                    <span>Visão Geral</span>
                </a>


                <!-- Cadastros - Menu Principal com 3 níveis -->
                <div class="nav-group">
                    <a class="nav-item" onclick="toggleSubmenu('sub-cadastros')">
                        <span class="material-icons-round">folder_shared</span>
                        <span>Cadastros</span>
                        <span class="material-icons-round ms-auto"
                            style="font-size:1.2rem; margin-left:auto;">expand_more</span>
                    </a>
                    <div id="sub-cadastros" class="nav-submenu">

                        <!-- 2º Nível: Gerais -->
                        <div class="nav-sublevel-title">Gerais</div>
                        <a class="nav-sub-item" onclick="switchView('products')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">inventory_2</span>Produtos
                        </a>
                        <a class="nav-sub-item" onclick="switchView('entities')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">person</span>Clientes
                        </a>
                        <a class="nav-sub-item" onclick="switchView('suppliers')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">local_shipping</span>Fornecedores
                        </a>
                        <a class="nav-sub-item" onclick="switchView('employees')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">badge</span>Funcionários
                        </a>

                        <!-- 2º Nível: Financeiro -->
                        <div class="nav-sublevel-title">Financeiro</div>
                        <a class="nav-sub-item" onclick="switchView('groups')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">folder</span>Grupos
                        </a>
                        <a class="nav-sub-item" onclick="switchView('accountPlans')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">account_tree</span>Plano de Contas
                        </a>
                        <a class="nav-sub-item" onclick="switchView('billing')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">receipt_long</span>Cobrança
                        </a>
                        <a class="nav-sub-item" onclick="switchView('paymentPlans')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">calendar_month</span>Planos de Pagto
                        </a>
                        <a class="nav-sub-item" onclick="switchView('banks')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">account_balance</span>Caixas e Bancos
                        </a>

                        <!-- 2º Nível: Fiscal -->
                        <div class="nav-sublevel-title">Fiscal</div>
                        <a class="nav-sub-item" onclick="switchView('cfop')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">list_alt</span>CFOP
                        </a>
                        <a class="nav-sub-item" onclick="switchView('icmsParams')">
                            <span class="material-icons-round"
                                style="font-size:1rem; margin-right:0.5rem;">percent</span>Parâmetros ICMS
                        </a>
                    </div>
                </div>

                <div class="nav-divider">OPERAÇÕES</div>

                <a class="nav-item" onclick="switchView('sales')">
                    <span class="material-icons-round">shopping_cart</span>
                    <span>Vendas</span>
                </a>
                <a class="nav-item" onclick="switchView('purchases')">
                    <span class="material-icons-round">storefront</span>
                    <span>Compras</span>
                </a>
                <a class="nav-item" onclick="switchView('finance')">
                    <span class="material-icons-round">payments</span>
                    <span>Financeiro</span>
                </a>
                <a class="nav-item" onclick="switchView('fiscal')">
                    <span class="material-icons-round">gavel</span>
                    <span>Fiscal</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div style="display:flex; align-items:center; gap:0.5rem;">
                    <span class="material-icons-round" style="color:var(--text-secondary)">person</span>
                    <div style="display:flex; flex-direction:column;">
                        <span id="userName" style="font-size:0.85rem; font-weight:600;">Usuário</span>
                        <span id="userTenant" style="font-size:0.7rem; color:var(--text-secondary)">Tenant</span>
                    </div>
                </div>
                <a href="../../index.html" style="color:var(--accent-danger); text-decoration:none;" title="Sair">
                    <span class="material-icons-round">logout</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="breadcrumb">
                    <span class="text-secondary" id="breadParent">ERP</span> / <span class="current"
                        id="pageTitle">Visão Geral</span>
                </div>
                <div class="top-actions">
                    <!-- Branch Selector can be added here later -->
                </div>
            </header>

            <div class="content-wrapper">

                <!-- View: Dashboard -->
                <div id="view-dashboard" class="page-content">
                    <div class="welcome-banner">
                        <h2>Bem-vindo ao ERP Core</h2>
                        <p>Gestão centralizada de Produtos, Pessoas e Financeiro.</p>
                    </div>

                    <div class="grid-2-col" style="display:grid; grid-template-columns:1fr 1fr; gap:1.5rem;">
                        <div class="card">
                            <div class="card-header">
                                <h3>Resumo de Cadastros</h3>
                            </div>
                            <div class="card-body" style="padding:2rem; text-align:center;">
                                <div style="font-size:2rem; font-weight:700;">0</div>
                                <div style="color:var(--text-secondary);">Produtos Ativos</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h3>Vendas do Mês</h3>
                            </div>
                            <div class="card-body" style="padding:2rem; text-align:center;">
                                <div style="font-size:2rem; font-weight:700; color:var(--accent-success);">R$ 0,00</div>
                                <div style="color:var(--text-secondary);">Faturamento</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- View: Sales (Vendas) -->
                <div id="view-sales" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Vendas</h2>
                        <p>Módulo de gestão de pedidos, orçamentos e faturamento.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3>Em Desenvolvimento</h3>
                        </div>
                        <div class="card-body" style="padding:3rem; text-align:center;">
                            <span class="material-icons-round"
                                style="font-size:4rem; color:var(--accent-warning);">construction</span>
                            <p style="margin-top:1rem; color:var(--text-secondary);">Este módulo está em
                                desenvolvimento.</p>
                        </div>
                    </div>
                </div>

                <!-- View: Purchases (Compras) -->
                <div id="view-purchases" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Compras</h2>
                        <p>Módulo de gestão de compras, pedidos a fornecedores e recebimento.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3>Em Desenvolvimento</h3>
                        </div>
                        <div class="card-body" style="padding:3rem; text-align:center;">
                            <span class="material-icons-round"
                                style="font-size:4rem; color:var(--accent-warning);">construction</span>
                            <p style="margin-top:1rem; color:var(--text-secondary);">Este módulo está em
                                desenvolvimento.</p>
                        </div>
                    </div>
                </div>

                <!-- View: Finance (Financeiro) -->
                <div id="view-finance" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Financeiro</h2>
                        <p>Módulo de gestão de contas a pagar, receber e fluxo de caixa.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3>Em Desenvolvimento</h3>
                        </div>
                        <div class="card-body" style="padding:3rem; text-align:center;">
                            <span class="material-icons-round"
                                style="font-size:4rem; color:var(--accent-warning);">construction</span>
                            <p style="margin-top:1rem; color:var(--text-secondary);">Este módulo está em
                                desenvolvimento.</p>
                        </div>
                    </div>
                </div>

                <!-- View: Fiscal -->
                <div id="view-fiscal" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Fiscal</h2>
                        <p>Módulo de gestão fiscal, notas fiscais e obrigações acessórias.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3>Em Desenvolvimento</h3>
                        </div>
                        <div class="card-body" style="padding:3rem; text-align:center;">
                            <span class="material-icons-round"
                                style="font-size:4rem; color:var(--accent-warning);">construction</span>
                            <p style="margin-top:1rem; color:var(--text-secondary);">Este módulo está em
                                desenvolvimento.</p>
                        </div>
                    </div>
                </div>

                <!-- View: Grupos (Financeiro) -->
                <div id="view-groups" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Gestão de Grupos</h2>
                        <p>Cadastro de grupos para classificação financeira.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="groupSearch" class="form-input"
                                    placeholder="Buscar por código ou nome..." onkeyup="filterGroups()">
                            </div>
                            <button class="btn btn-primary" onclick="openModal('finGroupModal')">
                                <span class="material-icons-round">add</span> Novo Grupo
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">Cód.</th>
                                        <th>Nome do Grupo</th>
                                        <th style="width:120px; text-align:right;">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="groupsTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- View: Plano de Contas (Financeiro) -->
                <div id="view-accountPlans" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Plano de Contas</h2>
                        <p>Estrutura contábil para classificação de receitas e despesas.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="accountPlanSearch" class="form-input"
                                    placeholder="Buscar por código ou conta..." onkeyup="filterAccountPlans()">
                            </div>
                            <button class="btn btn-primary" onclick="openModal('finPlanModal')">
                                <span class="material-icons-round">add</span> Nova Conta
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">Cód.</th>
                                        <th>Conta</th>
                                        <th>Conta Contábil</th>
                                        <th style="width:120px;">Tipo</th>
                                        <th style="width:120px; text-align:right;">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="accountPlansTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- View: Cobrança (Financeiro) -->
                <div id="view-billing" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Cadastro de Cobrança</h2>
                        <p>Regras de cobrança, taxas e parâmetros financeiros.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="billingSearch" class="form-input"
                                    placeholder="Buscar por código ou descrição..." onkeyup="filterBilling()">
                            </div>
                            <button class="btn btn-primary" onclick="openModal('finBillingModal')">
                                <span class="material-icons-round">add</span> Nova Cobrança
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">Cód.</th>
                                        <th>Descrição</th>
                                        <th>Moeda</th>
                                        <th>Juros (%)</th>
                                        <th style="width:120px; text-align:right;">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="billingTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- View: Planos de Pagamento (Financeiro) -->
                <div id="view-paymentPlans" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Planos de Pagamento</h2>
                        <p>Configuração de parcelamentos e prazos de pagamento.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="paymentPlanSearch" class="form-input"
                                    placeholder="Buscar por código ou descrição..." onkeyup="filterPaymentPlans()">
                            </div>
                            <button class="btn btn-primary" onclick="openModal('finPayPlanModal')">
                                <span class="material-icons-round">add</span> Novo Plano
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">Cód.</th>
                                        <th>Descrição do Prazo</th>
                                        <th>Parcelas</th>
                                        <th>Tipo</th>
                                        <th style="width:120px; text-align:right;">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="paymentPlansTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- View: Caixas e Bancos (Financeiro) -->
                <div id="view-banks" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Caixas e Bancos</h2>
                        <p>Cadastro de contas bancárias e caixas da empresa.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="bankSearch" class="form-input"
                                    placeholder="Buscar por nome ou banco..." onkeyup="filterBanks()">
                            </div>
                            <button class="btn btn-primary" onclick="openModal('finBankModal')">
                                <span class="material-icons-round">add</span> Novo Caixa/Banco
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width:80px;">Cód.</th>
                                        <th>Nome</th>
                                        <th>Banco</th>
                                        <th>Agência</th>
                                        <th>Conta</th>
                                        <th style="width:120px; text-align:right;">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="banksTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- View: CFOP (Fiscal) -->
                <div id="view-cfop" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Cadastro de CFOP</h2>
                        <p>Códigos Fiscais de Operações e Prestações.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="cfopSearch" class="form-input"
                                    placeholder="Buscar por código ou descrição..." onkeyup="filterCfop()">
                            </div>
                            <button class="btn btn-primary" onclick="openModal('fisCfopModal')">
                                <span class="material-icons-round">add</span> Novo CFOP
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width:120px;">Cód. Fiscal</th>
                                        <th>Descrição da Operação</th>
                                        <th style="width:120px; text-align:right;">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="cfopTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- View: Parâmetros ICMS (Fiscal) -->
                <div id="view-icmsParams" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Parâmetros de ICMS</h2>
                        <p>Configuração de alíquotas e regras de tributação por estado.</p>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="icmsSearch" class="form-input"
                                    placeholder="Buscar por código ou descrição..." onkeyup="filterIcmsParams()">
                            </div>
                            <button class="btn btn-primary" onclick="openModal('fisIcmsModal')">
                                <span class="material-icons-round">add</span> Novo Parâmetro
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width:100px;">Cód. Tribut.</th>
                                        <th>ICMS NF (%)</th>
                                        <th>ICMS Subs (%)</th>
                                        <th>Base Red. (%)</th>
                                        <th style="width:120px; text-align:right;">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="icmsParamsTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="view-products" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Catálogo de Produtos</h2>
                        <p>Gerencie o cadastro mestre de produtos para WMS e Vendas.</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="productSearch" class="form-input"
                                    placeholder="Buscar SKU ou Nome..." onkeyup="filterProducts()">
                            </div>
                            <button class="btn btn-primary" onclick="openProductModal()">
                                <span class="material-icons-round">add</span> Novo Produto
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>SKU</th>
                                        <th>Produto</th>
                                        <th>Logística</th>
                                        <th>Preço (R$)</th>
                                        <th>Estoque</th>
                                        <th style="text-align:right">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTableBody">
                                    <tr>
                                        <td colspan="6" class="empty-state">Nenhum produto cadastrado.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- View: Entities (Clients) -->
                <div id="view-entities" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Gestão de Clientes</h2>
                        <p>Cadastro centralizado de clientes, fornecedores e parceiros.</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="entitySearch" class="form-input"
                                    placeholder="Buscar por Nome, Fantasia ou CNPJ..." onkeyup="filterEntities()">
                            </div>
                            <button class="btn btn-primary" onclick="openEntityModal()">
                                <span class="material-icons-round">person_add</span> Novo Cliente
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Cód.</th>
                                        <th>Razão Social / Fantasia</th>
                                        <th>CNPJ / CPF</th>
                                        <th>Cidade/UF</th>
                                        <th>Vendedor</th>
                                        <th>Status</th>
                                        <th style="text-align:right">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="entitiesTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Entity Modal -->
                <div id="entityModal" class="modal-overlay">
                    <div class="modal-card modal-lg" style="max-width: 1000px;">
                        <div class="modal-header">
                            <h3>Cadastro de Parceiro</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeEntityModal()">
                                <span class="material-icons-round">close</span>
                            </button>
                        </div>
                        <form id="entityForm">
                            <div class="modal-body">
                                <!-- Header Info: Código e Razão -->
                                <div class="row" style="margin-bottom: 1rem;">
                                    <div class="form-group" style="flex: 1;">
                                        <label class="form-label">Código</label>
                                        <input type="text" id="cliCode" class="form-input" placeholder="Auto" disabled>
                                    </div>
                                    <div class="form-group" style="flex: 4;">
                                        <label class="form-label">Razão Social</label>
                                        <input type="text" id="cliName" class="form-input" required>
                                    </div>
                                    <div class="form-group" style="flex: 2;">
                                        <label class="form-label">CNPJ / CPF</label>
                                        <div style="display:flex; gap:0.5rem;">
                                            <input type="text" id="cliDoc" class="form-input" required>
                                            <button type="button" class="btn btn-secondary btn-icon"
                                                onclick="openCNPJSearch()" title="Buscar CNPJ na Receita">
                                                <span class="material-icons-round">search</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="form-group" style="flex: 1;">
                                        <label class="form-label">Tipo</label>
                                        <select id="cliType" class="form-input">
                                            <option value="J">J - Jurídica</option>
                                            <option value="F">F - Física</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Tabs Navigation -->
                                <div class="tabs-nav">
                                    <button type="button" class="tab-btn active"
                                        onclick="switchTab(this, 'tab-cli-geral')">Geral & Contato</button>
                                    <button type="button" class="tab-btn"
                                        onclick="switchTab(this, 'tab-cli-endereco')">Endereço</button>
                                    <button type="button" class="tab-btn"
                                        onclick="switchTab(this, 'tab-cli-comercial')">Comercial & Vendas</button>
                                    <button type="button" class="tab-btn"
                                        onclick="switchTab(this, 'tab-cli-fiscal')">Fiscal & Parâmetros</button>
                                </div>

                                <!-- Tab: Geral -->
                                <div id="tab-cli-geral" class="tab-content active">
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Nome Fantasia</label>
                                            <input type="text" id="cliFantasy" class="form-input">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Inscrição Estadual (IE)</label>
                                            <input type="text" id="cliIe" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Contato Principal</label>
                                            <input type="text" id="cliContact" class="form-input">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Data de Nascimento/Fundação</label>
                                            <input type="date" id="cliBirth" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Email Principal (NFe)</label>
                                            <input type="email" id="cliEmail" class="form-input"
                                                style="text-transform:lowercase">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Email Secundário (Cópia)</label>
                                            <input type="email" id="cliEmailCc" class="form-input"
                                                style="text-transform:lowercase">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Observações Gerais</label>
                                        <textarea id="cliNotes" class="form-input" rows="3"></textarea>
                                    </div>
                                </div>

                                <!-- Tab: Endereço (Requested) -->
                                <div id="tab-cli-endereco" class="tab-content">
                                    <div class="row">
                                        <div class="form-group col-3">
                                            <label class="form-label">CEP</label>
                                            <div style="display:flex; gap:0.5rem;">
                                                <input type="text" id="cliZip" class="form-input">
                                                <button type="button" class="btn btn-secondary btn-icon"><span
                                                        class="material-icons-round">search</span></button>
                                            </div>
                                        </div>
                                        <div class="form-group col-7">
                                            <label class="form-label">Logradouro (Rua, Av...)</label>
                                            <input type="text" id="cliStreet" class="form-input">
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label">Número</label>
                                            <input type="text" id="cliNumber" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Bairro</label>
                                            <input type="text" id="cliDistrict" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Cidade</label>
                                            <input type="text" id="cliCity" class="form-input">
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label">UF</label>
                                            <input type="text" id="cliState" class="form-input">
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label">IBGE</label>
                                            <input type="text" id="cliIbge" class="form-input">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Complemento / Ponto de Referência</label>
                                        <input type="text" id="cliComp" class="form-input">
                                    </div>
                                </div>

                                <!-- Tab: Comercial -->
                                <div id="tab-cli-comercial" class="tab-content">
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Vendedor 1 (RCA)</label>
                                            <select id="cliSeller1" class="form-input">
                                                <option value="">Selecione...</option>
                                                <option value="1">1 - Vendedor Interno</option>
                                                <option value="32">32 - Abnael Lisboa</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Vendedor 2</label>
                                            <select id="cliSeller2" class="form-input">
                                                <option value="">Sem vendedor secundário</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Limite de Crédito (R$)</label>
                                            <input type="number" step="0.01" id="cliCreditLimit" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Plano de Pagamento Padrão</label>
                                            <select id="cliPaymentPlan" class="form-input">
                                                <option value="0">A Vista</option>
                                                <option value="7">7 Dias</option>
                                                <option value="14">14 Dias</option>
                                                <option value="21">21 Dias</option>
                                                <option value="28">28 Dias</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Ramo de Atividade</label>
                                            <select id="cliActivity" class="form-input">
                                                <option value="comercio">Comércio</option>
                                                <option value="industria">Indústria</option>
                                                <option value="servico">Serviço</option>
                                            </select>
                                        </div>
                                    </div>

                                    <h4
                                        style="margin:1rem 0; font-size:0.9rem; color:var(--accent-danger); border-top:1px solid var(--border-color); padding-top:1rem;">
                                        Status e Bloqueio</h4>
                                    <div class="row"
                                        style="background: rgba(239,68,68,0.05); padding:1rem; border-radius:var(--radius-md); border:1px solid rgba(239,68,68,0.2);">
                                        <div class="form-group col-3">
                                            <label class="form-label">Cliente Bloqueado?</label>
                                            <select id="cliBlocked" class="form-input" style="font-weight:700;">
                                                <option value="nao">Não</option>
                                                <option value="sim">SIM</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-9">
                                            <label class="form-label">Motivo do Bloqueio</label>
                                            <input type="text" id="cliBlockReason" class="form-input"
                                                placeholder="Ex: Débito em atraso...">
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab: Fiscal & Parâmetros -->
                                <div id="tab-cli-fiscal" class="tab-content">
                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Tipo de Inscrição</label>
                                            <select id="cliTaxType" class="form-input">
                                                <option value="1">1 - Contribuinte ICMS</option>
                                                <option value="2">2 - Contribuinte Isento</option>
                                                <option value="9">9 - Não Contribuinte</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Simples Nacional?</label>
                                            <select id="cliSimples" class="form-input">
                                                <option value="sim">Sim</option>
                                                <option value="nao">Não</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Suframa</label>
                                            <input type="text" id="cliSuframa" class="form-input">
                                        </div>
                                    </div>

                                    <h4
                                        style="margin:1rem 0; font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase;">
                                        Parâmetros de Faturamento</h4>
                                    <div class="row" style="flex-wrap:wrap; gap:1rem;">
                                        <label class="check-label"><input type="checkbox" id="parIcmsAnt"> ICMS
                                            Antecipado?</label>
                                        <label class="check-label"><input type="checkbox" id="parComissao" checked> Paga
                                            Comissão?</label>
                                        <label class="check-label"><input type="checkbox" id="parIsentoIcms"> Isento
                                            ICMS?</label>
                                        <label class="check-label"><input type="checkbox" id="parIsentoPis"> Isento
                                            PIS/COFINS?</label>
                                        <label class="check-label"><input type="checkbox" id="parIsentoIss"> Isento
                                            ISS?</label>
                                        <label class="check-label"><input type="checkbox" id="parBoleto"> Isento Taxa
                                            Boleto?</label>
                                        <label class="check-label"><input type="checkbox" id="parFracionado" checked>
                                            Aceita Venda Fracionada?</label>
                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeEntityModal()">Cancelar</button>
                                <button type="submit" class="btn btn-primary">Salvar Cliente</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Footer Scripts -->

                <!-- VIEW: SUPPLIERS (Fornecedores) -->
                <div id="view-suppliers" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Gestão de Fornecedores</h2>
                        <p>Controle de parceiros de suprimentos, transportadoras e representantes.</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="supplierSearch" class="form-input"
                                    placeholder="Buscar Fornecedor ou CNPJ..." onkeyup="filterSuppliers()">
                            </div>
                            <button class="btn btn-primary" onclick="openSupplierModal()">
                                <span class="material-icons-round">add_business</span> Novo Fornecedor
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Cód.</th>
                                        <th>Fornecedor / Fantasia</th>
                                        <th>CNPJ</th>
                                        <th>Cidade/UF</th>
                                        <th>Tipo</th>
                                        <th style="text-align:right">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="suppliersTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <!-- VIEW: EMPLOYEES (Funcionários) -->
                <div id="view-employees" class="page-content" style="display:none;">
                    <div class="welcome-banner">
                        <h2>Gestão de Funcionários</h2>
                        <p>Controle de equipe, permissões de acesso e parametrizações de venda.</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div style="display:flex; gap:0.5rem; width: 100%; max-width: 400px;">
                                <input type="text" id="employeeSearch" class="form-input"
                                    placeholder="Buscar Funcionário..." onkeyup="filterEmployees()">
                            </div>
                            <button class="btn btn-primary" onclick="openEmployeeModal()">
                                <span class="material-icons-round">person_add</span> Novo Funcionário
                            </button>
                        </div>
                        <div class="card-body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Cód.</th>
                                        <th>Nome Completo</th>
                                        <th>Cargo / Setor</th>
                                        <th>CPF</th>
                                        <th>Status</th>
                                        <th style="text-align:right">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="employeesTableBody">
                                    <!-- JS Render -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- EMPLOYEE MODAL -->
                <div id="employeeModal" class="modal-overlay">
                    <div class="modal-card modal-lg"
                        style="max-width: 1200px; height: 90vh; display:flex; flex-direction:column;">
                        <div class="modal-header">
                            <h3>Cadastro de Funcionário</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeEmployeeModal()">
                                <span class="material-icons-round">close</span>
                            </button>
                        </div>

                        <!-- Tabs Navigation -->
                        <div class="tabs-nav" style="margin-top:0;">
                            <button type="button" class="tab-btn active"
                                onclick="switchTab(this, 'tab-emp-main')">Principal</button>
                            <button type="button" class="tab-btn"
                                onclick="switchTab(this, 'tab-emp-params')">Parametrizações</button>
                            <button type="button" class="tab-btn" onclick="switchTab(this, 'tab-emp-access')">Acessos do
                                Sistema</button>
                            <button type="button" class="tab-btn" id="tabBtnSales"
                                onclick="switchTab(this, 'tab-emp-sales')"
                                style="display:none; color:var(--accent-warning); border-bottom-color:var(--accent-warning);">Dados
                                de Vendas</button>
                        </div>

                        <form id="employeeForm" style="flex:1; overflow:hidden; display:flex; flex-direction:column;">
                            <div class="modal-body" style="overflow-y:auto; padding-top:1rem;">

                                <!-- TAB: PRINCIPAL -->
                                <div id="tab-emp-main" class="tab-content active">
                                    <div class="row">
                                        <div class="form-group col-2">
                                            <label class="form-label">Código</label>
                                            <input type="text" id="empCode" class="form-input" placeholder="Auto"
                                                disabled>
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Nome Completo</label>
                                            <input type="text" id="empName" class="form-input" required>
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label">Contratado em</label>
                                            <input type="date" id="empDate" class="form-input">
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label">CPF</label>
                                            <input type="text" id="empCpf" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-2">
                                            <label class="form-label">RG</label>
                                            <input type="text" id="empRg" class="form-input">
                                        </div>
                                        <div class="form-group col-5">
                                            <label class="form-label">Setor</label>
                                            <div style="display:flex; gap:0.5rem;">
                                                <input type="text" id="empSector" class="form-input">
                                                <button type="button" class="btn btn-secondary btn-icon"><span
                                                        class="material-icons-round">more_horiz</span></button>
                                            </div>
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">Cargo</label>
                                            <input type="text" id="empRole" class="form-input">
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label" style="color:var(--accent-warning);">É
                                                Vendedor?</label>
                                            <div style="display:flex; align-items:center; height:42px;">
                                                <label class="check-label"><input type="checkbox" id="empIsSeller"
                                                        onchange="toggleSalesTab()"> Sim, Habilitar Vendas</label>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Section: Endereço -->
                                    <h4
                                        style="margin:1rem 0 0.5rem 0; font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase; border-top:1px solid var(--border-color); padding-top:1rem;">
                                        Endereço</h4>
                                    <div class="row">
                                        <div class="form-group col-8">
                                            <label class="form-label">Logradouro</label>
                                            <input type="text" id="empStreet" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Bairro</label>
                                            <input type="text" id="empDistrict" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-2">
                                            <label class="form-label">CEP</label>
                                            <input type="text" id="empZip" class="form-input">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Cidade</label>
                                            <input type="text" id="empCity" class="form-input">
                                        </div>
                                        <div class="form-group col-1">
                                            <label class="form-label">UF</label>
                                            <input type="text" id="empState" class="form-input">
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">Telefone / Celular</label>
                                            <input type="text" id="empCell" class="form-input">
                                        </div>
                                    </div>

                                    <!-- Section: Login & Demissional -->
                                    <h4
                                        style="margin:1rem 0 0.5rem 0; font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase; border-top:1px solid var(--border-color); padding-top:1rem;">
                                        Acesso e Demissional</h4>
                                    <div class="row">
                                        <div class="form-group col-3">
                                            <label class="form-label">Usuário Login</label>
                                            <input type="text" id="empLogin" class="form-input">
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">Senha</label>
                                            <input type="password" id="empPass" class="form-input">
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">Data Demissão</label>
                                            <input type="date" id="empDismissDate" class="form-input">
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">Motivo</label>
                                            <input type="text" id="empDismissReason" class="form-input">
                                        </div>
                                    </div>
                                </div>

                                <!-- TAB: PARAMETRIZAÇÕES -->
                                <div id="tab-emp-params" class="tab-content">
                                    <div class="grid-container"
                                        style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:1rem;">
                                        <!-- Coluna 1 -->
                                        <div class="param-box"
                                            style="border:1px solid var(--border-color); padding:0.5rem; border-radius:4px;">
                                            <h5 style="margin-bottom:0.5rem; color:var(--primary-color);">Ajuste de
                                                Estoque</h5>
                                            <div class="form-group"><label class="form-label">Ajuste
                                                    Entrada</label><input type="text" class="form-input"></div>
                                            <div class="form-group"><label class="form-label">Ajuste Saída</label><input
                                                    type="text" class="form-input"></div>
                                            <div class="form-group"><label class="form-label">Estoque
                                                    Principal</label><input type="text" class="form-input"></div>

                                            <h5 style="margin:1rem 0 0.5rem 0; color:var(--primary-color);">Vendas |
                                                Saídas</h5>
                                            <div class="form-group"><label class="form-label">Credito
                                                    de...</label><input type="text" class="form-input"></div>
                                            <div class="form-group"><label class="form-label">Autorizar Venda
                                                    com...</label><input type="text" class="form-input"></div>
                                            <label class="check-label"><input type="checkbox"> Visualizar Margem</label>
                                            <label class="check-label"><input type="checkbox"> Apenas vendas do
                                                dia</label>
                                            <label class="check-label"><input type="checkbox"> Cancela vendas
                                                PDV</label>
                                        </div>

                                        <!-- Coluna 2 -->
                                        <div class="param-box"
                                            style="border:1px solid var(--border-color); padding:0.5rem; border-radius:4px;">
                                            <h5 style="margin-bottom:0.5rem; color:var(--primary-color);">Entradas</h5>
                                            <div class="form-group"><label class="form-label">Op. Autorizadas
                                                    XML</label><input type="text" class="form-input"></div>

                                            <h5 style="margin:1rem 0 0.5rem 0; color:var(--primary-color);">Contas a
                                                Receber</h5>
                                            <div class="row">
                                                <div class="form-group col-6"><label
                                                        class="form-label">Vincular?</label><select class="form-input">
                                                        <option>Sim</option>
                                                        <option>Não</option>
                                                    </select></div>
                                                <div class="form-group col-6"><label
                                                        class="form-label">Utilizar?</label><select class="form-input">
                                                        <option>Sim</option>
                                                        <option>Não</option>
                                                    </select></div>
                                            </div>

                                            <h5 style="margin:1rem 0 0.5rem 0; color:var(--primary-color);">Empresas
                                                Autorizadas
                                            </h5>
                                            <div
                                                style="border:1px solid var(--border-color); height:100px; background:var(--bg-secondary);">
                                            </div>
                                        </div>

                                        <!-- Coluna 3 -->
                                        <div class="param-box"
                                            style="border:1px solid var(--border-color); padding:0.5rem; border-radius:4px;">
                                            <h5 style="margin-bottom:0.5rem; color:var(--primary-color);">Outras
                                                Parametrizações
                                            </h5>
                                            <div class="form-group"><label class="form-label">Cancela
                                                    CT-e?</label><select class="form-input">
                                                    <option>Sim</option>
                                                    <option>Não</option>
                                                </select></div>
                                            <div class="form-group"><label class="form-label">Libera prod
                                                    excluído?</label><select class="form-input">
                                                    <option>Sim</option>
                                                    <option>Não</option>
                                                </select></div>
                                            <div class="form-group"><label class="form-label">Atualiza
                                                    telas?</label><select class="form-input">
                                                    <option>Sim</option>
                                                    <option>Não</option>
                                                </select></div>
                                            <div class="form-group"><label class="form-label">Cancela
                                                    NFe?</label><select class="form-input">
                                                    <option>Sim</option>
                                                    <option>Não</option>
                                                </select></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- TAB: ACESSOS -->
                                <div id="tab-emp-access" class="tab-content">
                                    <div class="form-group">
                                        <input type="text" class="form-input"
                                            placeholder="Pesquisar telas do sistema...">
                                    </div>
                                    <div class="row"
                                        style="height:300px; border:1px solid var(--border-color); margin-bottom:1rem;">
                                        <div class="col-4"
                                            style="border-right:1px solid var(--border-color); padding:0.5rem; overflow-y:auto;">
                                            <strong>Módulos</strong>
                                            <div class="list-item">Cadastros</div>
                                            <div class="list-item">Vendas</div>
                                            <div class="list-item">Financeiro</div>
                                            <div class="list-item">Fiscal</div>
                                        </div>
                                        <div class="col-4"
                                            style="border-right:1px solid var(--border-color); padding:0.5rem; overflow-y:auto;">
                                            <strong>Submódulos</strong>
                                            <div class="list-item">Clientes</div>
                                            <div class="list-item">Produtos</div>
                                        </div>
                                        <div class="col-4" style="padding:0.5rem; overflow-y:auto;">
                                            <strong>Telas</strong>
                                            <div class="list-item"> <input type="checkbox"> Cadastro de Clientes</div>
                                            <div class="list-item"> <input type="checkbox"> Relatórios</div>
                                        </div>
                                    </div>

                                    <h5 style="margin-bottom:0.5rem;">Telas autorizadas para este usuário</h5>
                                    <div
                                        style="height:150px; border:1px solid var(--border-color); background:var(--bg-secondary);">
                                        <table class="data-table" style="font-size:0.8rem;">
                                            <thead>
                                                <tr>
                                                    <th>Módulo</th>
                                                    <th>Submódulo</th>
                                                    <th>Tela</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Cadastros</td>
                                                    <td>Clientes</td>
                                                    <td>Manutenção</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>



                                <!-- TAB: DADOS DE VENDA (Condicional) -->
                                <div id="tab-emp-sales" class="tab-content">
                                    <div class="alert-info"
                                        style="background:rgba(245, 158, 11, 0.1); border-color:rgba(245, 158, 11, 0.2); color:var(--accent-warning);">
                                        <span class="material-icons-round">monetization_on</span>
                                        <span>Configurações exclusivas para perfil de VENDEDOR.</span>
                                    </div>

                                    <h4
                                        style="margin-bottom:1rem; font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase;">
                                        Metas e Comissões</h4>
                                    <div class="row">
                                        <div class="form-group col-3">
                                            <label class="form-label">Supervisor Responsável</label>
                                            <div style="display:flex; gap:0.5rem;">
                                                <input type="text" id="saleSupervisor" class="form-input"
                                                    placeholder="Buscar...">
                                                <button type="button" class="btn btn-secondary btn-icon"><span
                                                        class="material-icons-round">search</span></button>
                                            </div>
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">Meta Mensal (R$)</label>
                                            <input type="number" id="saleGoal" class="form-input" placeholder="0.00">
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">% Comissão</label>
                                            <input type="number" id="saleCommission" class="form-input"
                                                placeholder="0.00">
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">% Desc. Máximo</label>
                                            <input type="number" id="saleMaxDiscount" class="form-input"
                                                placeholder="0.00">
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Região de Atuação</label>
                                            <input type="text" id="saleRegion" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Tipo de Comissionamento</label>
                                            <select id="saleCommType" class="form-input">
                                                <option value="faturamento">Sobre Faturamento</option>
                                                <option value="liquidez">Sobre Liquidez/Recebimento</option>
                                                <option value="margem">Sobre Margem de Lucro</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Permissões Especiais</label>
                                            <div
                                                style="display:flex; flex-direction:column; gap:0.5rem; padding-top:0.5rem;">
                                                <label class="check-label"><input type="checkbox" id="saleAllowNeg">
                                                    Vender com estoque
                                                    negativo</label>
                                                <label class="check-label"><input type="checkbox" id="saleViewCost">
                                                    Visualizar custo do
                                                    produto</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- Closes modal-body -->

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeEmployeeModal()">Cancelar</button>
                                <button type="submit" class="btn btn-primary">Salvar Funcionario</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- SUPPLIER MODAL -->
                <div id="supplierModal" class="modal-overlay">
                    <div class="modal-card modal-lg" style="max-width: 1000px;">
                        <div class="modal-header">
                            <h3>Cadastro de Fornecedor</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeSupplierModal()">
                                <span class="material-icons-round">close</span>
                            </button>
                        </div>
                        <form id="supplierForm">
                            <div class="modal-body">
                                <!-- Header Info -->
                                <div class="row" style="margin-bottom: 1rem;">
                                    <div class="form-group" style="flex: 1;">
                                        <label class="form-label">Código</label>
                                        <input type="text" id="supCode" class="form-input" placeholder="Auto" disabled>
                                    </div>
                                    <div class="form-group" style="flex: 4;">
                                        <label class="form-label">Razão Social (Fornecedor)</label>
                                        <input type="text" id="supName" class="form-input" required>
                                    </div>
                                    <div class="form-group" style="flex: 2;">
                                        <label class="form-label">CNPJ / CPF</label>
                                        <div style="display:flex; gap:0.5rem;">
                                            <input type="text" id="supDoc" class="form-input" required>
                                            <button type="button" class="btn btn-secondary btn-icon"
                                                onclick="openCNPJSearch('supplier')" title="Buscar CNPJ">
                                                <span class="material-icons-round">search</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="form-group" style="flex: 1;">
                                        <label class="form-label">Tipo</label>
                                        <select id="supType" class="form-input">
                                            <option value="J">Jurídica</option>
                                            <option value="F">Física</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row" style="margin-bottom: 1.5rem;">
                                    <div class="form-group col-6">
                                        <label class="form-label">Nome Fantasia</label>
                                        <input type="text" id="supFantasy" class="form-input">
                                    </div>
                                    <div class="form-group col-6">
                                        <label class="form-label">Inscrição Estadual (IE)</label>
                                        <input type="text" id="supIe" class="form-input">
                                    </div>
                                </div>

                                <!-- Tabs -->
                                <div class="tabs-nav">
                                    <button type="button" class="tab-btn active"
                                        onclick="switchTab(this, 'tab-sup-comercial')">Dados
                                        Comerciais</button>
                                    <button type="button" class="tab-btn"
                                        onclick="switchTab(this, 'tab-sup-rep')">Representante</button>
                                    <button type="button" class="tab-btn"
                                        onclick="switchTab(this, 'tab-sup-outros')">Financeiro &
                                        Outros</button>
                                </div>

                                <!-- Tab 1: Dados Comerciais (Endereço + Contato) -->
                                <div id="tab-sup-comercial" class="tab-content active">
                                    <div class="row">
                                        <div class="form-group col-3">
                                            <label class="form-label">CEP</label>
                                            <div style="display:flex; gap:0.5rem;">
                                                <input type="text" id="supZip" class="form-input">
                                                <button type="button" class="btn btn-secondary btn-icon"><span
                                                        class="material-icons-round">search</span></button>
                                            </div>
                                        </div>
                                        <div class="form-group col-7">
                                            <label class="form-label">Endereço</label>
                                            <input type="text" id="supStreet" class="form-input">
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label">Nr.</label>
                                            <input type="text" id="supNumber" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-5">
                                            <label class="form-label">Bairro</label>
                                            <input type="text" id="supDistrict" class="form-input">
                                        </div>
                                        <div class="form-group col-5">
                                            <label class="form-label">Cidade</label>
                                            <input type="text" id="supCity" class="form-input">
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label">UF</label>
                                            <input type="text" id="supState" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Telefone</label>
                                            <input type="text" id="supPhone" class="form-input">
                                        </div>
                                        <div class="form-group col-8">
                                            <label class="form-label">Nome para Contato</label>
                                            <input type="text" id="supContactName" class="form-input">
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab 2: Representante -->
                                <div id="tab-sup-rep" class="tab-content">
                                    <div class="alert-info">
                                        <span class="material-icons-round">info</span>
                                        <span>Dados do representante legal ou contato comercial
                                            direto.</span>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-12">
                                            <label class="form-label">Nome do Representante</label>
                                            <input type="text" id="repName" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-8">
                                            <label class="form-label">Endereço (Representante)</label>
                                            <input type="text" id="repAddr" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Bairro</label>
                                            <input type="text" id="repDistrict" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Cidade / UF</label>
                                            <input type="text" id="repCity" class="form-input">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Telefone / Celular</label>
                                            <input type="text" id="repPhone" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-12">
                                            <label class="form-label">Email do Representante</label>
                                            <input type="email" id="repEmail" class="form-input">
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab 3: Outros Dados & Financeiro -->
                                <div id="tab-sup-outros" class="tab-content">
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Email Principal (NFe/Pedidos)</label>
                                            <input type="email" id="supEmail" class="form-input">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Fornecedor Principal?</label>
                                            <div style="display:flex; align-items:center; height:42px;">
                                                <label style="margin-right:1rem;"><input type="radio" name="isMain"
                                                        value="sim">
                                                    Sim</label>
                                                <label><input type="radio" name="isMain" value="nao" checked>
                                                    Não</label>
                                            </div>
                                        </div>
                                    </div>

                                    <h4
                                        style="margin:1rem 0; font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase; border-top:1px solid var(--border-color); padding-top:1rem;">
                                        Classificação</h4>
                                    <div class="form-group">
                                        <div style="display:flex; gap:1.5rem; flex-wrap:wrap;">
                                            <label><input type="radio" name="supCategory" value="revenda">
                                                Revenda</label>
                                            <label><input type="radio" name="supCategory" value="transp">
                                                Transportador</label>
                                            <label><input type="radio" name="supCategory" value="ambos">
                                                Revenda |
                                                Transp.</label>
                                            <label><input type="radio" name="supCategory" value="outros" checked>
                                                Outros</label>
                                        </div>
                                    </div>

                                    <h4
                                        style="margin:1rem 0; font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase; border-top:1px solid var(--border-color); padding-top:1rem;">
                                        Dados Bancários</h4>
                                    <div class="row">
                                        <div class="form-group col-3">
                                            <label class="form-label">Banco</label>
                                            <input type="text" id="supBank" class="form-input" placeholder="000">
                                        </div>
                                        <div class="form-group col-3">
                                            <label class="form-label">Agência</label>
                                            <input type="text" id="supAgency" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Conta Corrente</label>
                                            <input type="text" id="supAccount" class="form-input">
                                        </div>
                                        <div class="form-group col-2">
                                            <label class="form-label">Cód. Comprador</label>
                                            <input type="text" id="supBuyerCode" class="form-input">
                                        </div>
                                    </div>

                                    <div class="form-group" style="margin-top:1rem;">
                                        <label class="form-label">Observação</label>
                                        <input type="text" id="supNotes" class="form-input">
                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeSupplierModal()">Cancelar</button>
                                <button type="submit" class="btn btn-primary">Salvar Fornecedor</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Product Modal -->
                <div id="productModal" class="modal-overlay">
                    <div class="modal-card modal-lg" style="max-width: 900px;">
                        <div class="modal-header">
                            <h3>Cadastro de Produto</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeProductModal()">
                                <span class="material-icons-round">close</span>
                            </button>
                        </div>
                        <form id="productForm">
                            <div class="modal-body">
                                <!-- Header Info -->
                                <div class="row" style="margin-bottom: 1rem;">
                                    <div class="form-group" style="flex: 1;">
                                        <label class="form-label">Código (SKU)</label>
                                        <input type="text" id="prodSku" class="form-input" required>
                                    </div>
                                    <div class="form-group" style="flex: 4;">
                                        <label class="form-label">Descrição do Produto</label>
                                        <input type="text" id="prodName" class="form-input" required>
                                    </div>
                                    <div class="form-group" style="flex: 1;">
                                        <label class="form-label">Data Cadastro</label>
                                        <input type="date" id="prodDate" class="form-input" disabled>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom: 1.5rem;">
                                    <div class="form-group" style="width: 100%;">
                                        <label class="form-label">Grupo do Produto</label>
                                        <div style="display:flex; gap:0.5rem;">
                                            <select id="prodGroup" class="form-input">
                                                <option value="">Selecione...</option>
                                                <option value="lubrificantes">Lubrificantes</option>
                                                <option value="filtros">Filtros</option>
                                                <option value="pneus">Pneus</option>
                                                <option value="pecas">Peças Diversas</option>
                                            </select>
                                            <button type="button" class="btn btn-secondary btn-icon"
                                                title="Gerenciar Grupos">
                                                <span class="material-icons-round">settings</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tabs Navigation -->
                                <div class="tabs-nav">
                                    <button type="button" class="tab-btn active"
                                        onclick="switchTab(this, 'tab-details')">Detalhes &
                                        Unidades</button>
                                    <button type="button" class="tab-btn"
                                        onclick="switchTab(this, 'tab-logistica')">Logística &
                                        Endereço</button>
                                    <button type="button" class="tab-btn" onclick="switchTab(this, 'tab-fiscal')">Fiscal
                                        &
                                        Fornecedor</button>
                                </div>

                                <!-- Tab: Detalhes -->
                                <div id="tab-details" class="tab-content active">
                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Unid. Comercial</label>
                                            <input type="text" id="unitCom" class="form-input" placeholder="UN, PC, LT">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Unid. Embalagem</label>
                                            <input type="text" id="unitBox" class="form-input" placeholder="CX, FD">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Fator (Qtde na CX)</label>
                                            <input type="number" id="unitFactor" class="form-input" placeholder="1">
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Cód. Barras (EAN13)</label>
                                            <input type="text" id="eanCode" class="form-input">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Cód. Barras CX (DUN14)</label>
                                            <input type="text" id="dunCode" class="form-input">
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Marca</label>
                                            <input type="text" id="prodBrand" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Família</label>
                                            <input type="text" id="prodFamily" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Produto para Revenda?</label>
                                            <select id="isResale" class="form-input">
                                                <option value="sim">Sim</option>
                                                <option value="nao">Não (Consumo/Imob)</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Canais de Venda</label>
                                        <div
                                            style="display:flex; gap:1.5rem; padding:0.5rem; background:rgba(255,255,255,0.02); border:1px solid var(--border-color); border-radius:var(--radius-md);">
                                            <label
                                                style="display:flex; align-items:center; gap:0.5rem; font-size:0.9rem;">
                                                <input type="checkbox" checked> Tela de Vendas
                                            </label>
                                            <label
                                                style="display:flex; align-items:center; gap:0.5rem; font-size:0.9rem;">
                                                <input type="checkbox" checked> App Mobile (Sales Force)
                                            </label>
                                            <label
                                                style="display:flex; align-items:center; gap:0.5rem; font-size:0.9rem;">
                                                <input type="checkbox"> E-commerce B2B
                                            </label>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 1rem;">
                                        <div class="form-group col-12">
                                            <label class="form-label">Imagem do Produto (URL)</label>
                                            <div style="display:flex; gap:0.5rem;">
                                                <input type="text" id="prodImage" class="form-input"
                                                    placeholder="http://...">
                                                <button type="button" class="btn btn-secondary"><span
                                                        class="material-icons-round">image</span></button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Observações Gerais</label>
                                        <textarea id="prodNotes" class="form-input" rows="2"></textarea>
                                    </div>
                                </div>

                                <!-- Tab: Logística -->
                                <div id="tab-logistica" class="tab-content">
                                    <h4
                                        style="margin-bottom:1rem; font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase;">
                                        Dimensões & Peso</h4>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Peso Líquido (kg)</label>
                                            <input type="number" step="0.001" id="weightNet" class="form-input">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Peso Bruto (kg)</label>
                                            <input type="number" step="0.001" id="weightGross" class="form-input">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Altura (cm)</label>
                                            <input type="number" id="dimHeight" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Largura (cm)</label>
                                            <input type="number" id="dimWidth" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Profundidade (cm)</label>
                                            <input type="number" id="dimDepth" class="form-input">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Volume (m³)</label>
                                        <input type="number" step="0.0001" id="prodVol" class="form-input"
                                            placeholder="Calculado automaticamente" readonly>
                                    </div>

                                    <h4
                                        style="margin:1rem 0; font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase; border-top:1px solid var(--border-color); padding-top:1rem;">
                                        Endereçamento (WMS)</h4>
                                    <div class="row">
                                        <div class="form-group col-4">
                                            <label class="form-label">Rua</label>
                                            <input type="text" id="wmsStreet" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Prédio/Bloco</label>
                                            <input type="text" id="wmsBuilding" class="form-input">
                                        </div>
                                        <div class="form-group col-4">
                                            <label class="form-label">Apto/Nível</label>
                                            <input type="text" id="wmsLevel" class="form-input">
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab: Fiscal e Fornecedor -->
                                <div id="tab-fiscal" class="tab-content">
                                    <div class="row">
                                        <div class="form-group col-12">
                                            <label class="form-label">Fornecedor Padrão</label>
                                            <div style="display:flex; gap:0.5rem;">
                                                <input type="text" id="supplierName" class="form-input"
                                                    placeholder="Buscar Fornecedor...">
                                                <button type="button" class="btn btn-secondary"><span
                                                        class="material-icons-round">search</span></button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Fabricante</label>
                                            <input type="text" id="manufacturer" class="form-input">
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">Cód. no Fabricante</label>
                                            <input type="text" id="manufacturerCode" class="form-input">
                                        </div>
                                    </div>

                                    <div class="form-group"
                                        style="margin-top:1rem; border-top:1px solid var(--border-color); padding-top:1rem;">
                                        <label class="form-label">NCM (Classificação Fiscal)</label>
                                        <div style="display:flex; gap:0.5rem;">
                                            <input type="text" id="ncmCode" class="form-input" style="width: 120px;"
                                                placeholder="Código">
                                            <input type="text" id="ncmDesc" class="form-input"
                                                placeholder="Descrição do NCM" readonly>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label class="form-label">Origem</label>
                                            <select id="prodOrigin" class="form-input">
                                                <option value="0">0 - Nacional</option>
                                                <option value="1">1 - Estrangeira (Imp. Direta)</option>
                                                <option value="2">2 - Estrangeira (Adq. no M.I.)</option>
                                            </select>
                                        </div>
                                        <div class="form-group col-6">
                                            <label class="form-label">% IPI</label>
                                            <input type="number" id="taxIpi" class="form-input" placeholder="0.00">
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary"
                                    onclick="closeProductModal()">Cancelar</button>
                                <button type="submit" class="btn btn-primary">Salvar Produto</button>
                            </div>
                        </form>
                    </div>
                </div>



                <!-- ========================================== -->
                <!-- MODALS FINANCEIROS                         -->
                <!-- ========================================== -->

                <!-- 1. GRUPO -->
                <div id="finGroupModal" class="modal-overlay">
                    <div class="modal-card" style="max-width: 700px;">
                        <div class="modal-header">
                            <h3>Cadastro de Grupo</h3>
                            <button class="btn btn-secondary btn-icon"
                                onclick="clearForm('finGroupModal'); closeModal('finGroupModal')"><span
                                    class="material-icons-round">close</span></button>
                        </div>
                        <div class="modal-body">
                            <!-- Formulário -->
                            <div class="row">
                                <div class="form-group col-4">
                                    <label class="form-label">Código *</label>
                                    <input type="text" id="grpCodigo" class="form-input" placeholder="1001">
                                </div>
                                <div class="form-group col-8">
                                    <label class="form-label">Nome do Grupo *</label>
                                    <input type="text" id="grpNome" class="form-input"
                                        placeholder="Ex: Vendas, Serviços...">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary"
                                onclick="clearForm('finGroupModal'); closeModal('finGroupModal')">Cancelar</button>
                            <button class="btn btn-primary" onclick="saveGrupo()">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 2. PLANO DE CONTAS -->
                <div id="finPlanModal" class="modal-overlay">
                    <div class="modal-card" style="max-width: 800px;">
                        <div class="modal-header">
                            <h3>Plano de Contas</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finPlanModal')"><span
                                    class="material-icons-round">close</span></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="form-group col-3">
                                    <label class="form-label">Código</label>
                                    <input type="text" class="form-input" placeholder="11010">
                                </div>
                                <div class="form-group col-9">
                                    <label class="form-label">Conta</label>
                                    <input type="text" class="form-input">
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-4">
                                    <label class="form-label">Conta Contábil</label>
                                    <input type="text" class="form-input">
                                </div>
                                <div class="form-group col-4">
                                    <label class="form-label">Vl. Orçado</label>
                                    <input type="text" class="form-input">
                                </div>
                            </div>
                            <fieldset
                                style="border:1px solid var(--border-color); padding:1rem; margin-bottom:1rem; border-radius:4px;">
                                <legend style="padding:0 0.5rem; font-size:0.8rem; color:var(--text-secondary);">Tipo de
                                    Conta</legend>
                                <div style="display:flex; gap:1rem;">
                                    <label class="check-label"><input type="radio" name="accType" checked> Ativo</label>
                                    <label class="check-label"><input type="radio" name="accType"> Receita</label>
                                    <label class="check-label"><input type="radio" name="accType"> Despesa</label>
                                    <label class="check-label"><input type="radio" name="accType"> Excluída</label>
                                </div>
                            </fieldset>
                            <div class="row">
                                <div class="col-6">
                                    <fieldset
                                        style="border:1px solid var(--border-color); padding:0.5rem; border-radius:4px;">
                                        <legend style="padding:0 0.5rem; font-size:0.8rem;">Investimento (S/N)</legend>
                                        <div style="display:flex; gap:1rem;">
                                            <label class="check-label"><input type="radio" name="accInv"> Sim</label>
                                            <label class="check-label"><input type="radio" name="accInv" checked>
                                                Não</label>
                                        </div>
                                    </fieldset>
                                </div>
                                <div class="col-6">
                                    <fieldset
                                        style="border:1px solid var(--border-color); padding:0.5rem; border-radius:4px;">
                                        <legend style="padding:0 0.5rem; font-size:0.8rem;">Exibir DRE</legend>
                                        <div style="display:flex; gap:1rem;">
                                            <label class="check-label"><input type="radio" name="accDre"> Sim</label>
                                            <label class="check-label"><input type="radio" name="accDre" checked>
                                                Não</label>
                                        </div>
                                    </fieldset>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeModal('finPlanModal')">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Plano de Contas salvo!'); closeModal('finPlanModal')">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 3. CADASTRO DE COBRANÇA -->
                <div id="finBillingModal" class="modal-overlay">
                    <div class="modal-card modal-lg"
                        style="max-width: 900px; height:90vh; display:flex; flex-direction:column;">
                        <div class="modal-header">
                            <h3>Cadastro de Cobrança</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finBillingModal')"><span
                                    class="material-icons-round">close</span></button>
                        </div>
                        <div class="modal-body" style="overflow-y:auto;">
                            <div class="row">
                                <div class="form-group col-3">
                                    <label class="form-label">Código</label>
                                    <input type="text" class="form-input" placeholder="PIX">
                                </div>
                                <div class="form-group col-9">
                                    <label class="form-label">Descrição da Cobrança</label>
                                    <input type="text" class="form-input" placeholder="PIX BASA">
                                </div>
                            </div>
                            <!-- Linha 2 -->
                            <div class="row">
                                <div class="form-group col-3">
                                    <label class="form-label">Moeda</label>
                                    <input type="text" class="form-input" value="D">
                                </div>
                                <div class="form-group col-3">
                                    <label class="form-label">Carência (dias)</label>
                                    <input type="number" class="form-input">
                                </div>
                                <div class="form-group col-3">
                                    <label class="form-label">Dias Protesto</label>
                                    <input type="number" class="form-input">
                                </div>
                            </div>
                            <!-- Linha 3 -->
                            <div class="row">
                                <div class="form-group col-2">
                                    <label class="form-label">(%) Acres.Fin.</label>
                                    <input type="text" class="form-input">
                                </div>
                                <div class="form-group col-2">
                                    <label class="form-label">(%) Comissão</label>
                                    <input type="text" class="form-input">
                                </div>
                                <div class="form-group col-3">
                                    <label class="form-label">Hierarquia</label>
                                    <input type="text" class="form-input">
                                </div>
                                <div class="form-group col-2">
                                    <label class="form-label">(%) Juros</label>
                                    <input type="text" class="form-input">
                                </div>
                                <div class="form-group col-3">
                                    <label class="form-label">Bloqueio Automático</label>
                                    <input type="number" class="form-input" value="1">
                                </div>
                            </div>
                            <!-- Linha 4 -->
                            <div class="row">
                                <div class="form-group col-2">
                                    <label class="form-label">Cód. Cx.Banco</label>
                                    <input type="text" class="form-input" value="6">
                                </div>
                                <div class="form-group col-5">
                                    <label class="form-label">Meio de Pagamento (NF-e)</label>
                                    <select class="form-input">
                                        <option>17 - Pagamento Instantâneo (PIX)</option>
                                    </select>
                                </div>
                                <div class="form-group col-5">
                                    <label class="form-label">Tipo Movimento (Baixa/Conciliação)</label>
                                    <select class="form-input">
                                        <option>Separado</option>
                                    </select>
                                </div>
                            </div>
                            <!-- Checkboxes Area -->
                            <div
                                style="background:var(--bg-secondary); padding:1rem; border:1px solid var(--border-color); border-radius:4px; display:grid; grid-template-columns: 1fr 1fr; gap:0.5rem; margin-top:1rem;">
                                <label class="check-label"><input type="checkbox" checked> Disponível nas vendas</label>
                                <label class="check-label"><input type="checkbox"> Bloquear cliente auto.</label>
                                <label class="check-label"><input type="checkbox" checked> Pagar comissão</label>
                                <label class="check-label"><input type="checkbox" checked> Disponível no APP</label>
                                <label class="check-label"><input type="checkbox" checked> Desbloquear cliente
                                    auto.</label>
                                <label class="check-label"><input type="checkbox"> Gera boletos</label>
                                <label class="check-label"><input type="checkbox" checked> Baixa automática</label>
                                <label class="check-label"><input type="checkbox" checked> Cobrança "à vista"</label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeModal('finBillingModal')">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Cobrança salva!'); closeModal('finBillingModal')">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 4. PLANO DE PAGAMENTO -->
                <div id="finPayPlanModal" class="modal-overlay">
                    <div class="modal-card modal-lg" style="max-width: 800px;">
                        <div class="modal-header">
                            <h3>Plano de Pagamento</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finPayPlanModal')"><span
                                    class="material-icons-round">close</span></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="form-group col-2">
                                    <label class="form-label">Código</label>
                                    <input type="text" class="form-input" value="15">
                                </div>
                                <div class="form-group col-10">
                                    <label class="form-label">Descrição do Prazo</label>
                                    <input type="text" class="form-input" value="7/14 DIAS">
                                </div>
                            </div>
                            <h5 style="margin-top:1rem; border-bottom:1px solid var(--border-color);">Parametrizações
                            </h5>
                            <div class="row">
                                <div class="form-group col-12">
                                    <label class="form-label">Parcelas (Dias)</label>
                                    <div style="display:flex; gap:0.25rem;">
                                        <input type="text" class="form-input" style="width:50px; text-align:center;"
                                            value="7">
                                        <input type="text" class="form-input" style="width:50px; text-align:center;"
                                            value="14">
                                        <input type="text" class="form-input" style="width:50px; text-align:center;">
                                        <input type="text" class="form-input" style="width:50px; text-align:center;">
                                        <input type="text" class="form-input" style="width:50px; text-align:center;">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <label class="form-label">Tipo de Plano</label>
                                    <div style="display:flex; gap:1rem;">
                                        <label class="check-label"><input type="radio" name="payType"> A vista</label>
                                        <label class="check-label"><input type="radio" name="payType" checked> A
                                            prazo</label>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label class="form-label">Libera Cliente Bloqueado?</label>
                                    <div style="display:flex; gap:1rem;">
                                        <label class="check-label"><input type="radio" name="payUnlock"> Sim</label>
                                        <label class="check-label"><input type="radio" name="payUnlock" checked>
                                            Não</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeModal('finPayPlanModal')">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Plano de Pagamento salvo!'); closeModal('finPayPlanModal')">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 5. CAIXAS E BANCOS -->
                <div id="finBankModal" class="modal-overlay">
                    <div class="modal-card modal-lg" style="max-width: 1000px;">
                        <div class="modal-header">
                            <h3>Caixas e Bancos</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finBankModal')"><span
                                    class="material-icons-round">close</span></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="form-group col-2">
                                    <label class="form-label">Código</label>
                                    <input type="text" class="form-input" value="1">
                                </div>
                                <div class="form-group col-2">
                                    <label class="form-label">Empresa</label>
                                    <input type="text" class="form-input" value="01">
                                </div>
                                <div class="form-group col-8">
                                    <label class="form-label">Nome</label>
                                    <input type="text" class="form-input" value="CAIXA PDV 01">
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-3"><label class="form-label">Variação</label><input
                                        class="form-input"></div>
                                <div class="form-group col-3"><label class="form-label">Nº Banco</label><input
                                        class="form-input"></div>
                                <div class="form-group col-3"><label class="form-label">Agência</label><input
                                        class="form-input"></div>
                                <div class="form-group col-3"><label class="form-label">Conta</label><input
                                        class="form-input"></div>
                            </div>
                            <div class="row">
                                <div class="form-group col-8"><label class="form-label">Dir. Arquivo
                                        Remessa</label><input class="form-input" value="C:\Acontec\Spool\"></div>
                                <div class="form-group col-4"><label class="form-label">Layout Boleto</label><select
                                        class="form-input">
                                        <option>Padrão</option>
                                    </select></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeModal('finBankModal')">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Caixas e Bancos salvo!'); closeModal('finBankModal')">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- ========================================== -->
                <!-- MODALS FISCAIS                             -->
                <!-- ========================================== -->

                <!-- 6. CFOP -->
                <div id="fisCfopModal" class="modal-overlay">
                    <div class="modal-card modal-lg">
                        <div class="modal-header">
                            <h3>Cadastro de CFOP</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('fisCfopModal')"><span
                                    class="material-icons-round">close</span></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="form-group col-2">
                                    <label class="form-label">Cód. Fiscal</label>
                                    <input type="text" class="form-input" value="0">
                                </div>
                                <div class="form-group col-10">
                                    <label class="form-label">Descrição da Operação</label>
                                    <input type="text" class="form-input">
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-4">
                                    <label class="form-label">Baixar Estoque?</label>
                                    <select class="form-input">
                                        <option>Sim</option>
                                        <option>Não</option>
                                    </select>
                                </div>
                                <div class="form-group col-4">
                                    <label class="form-label">Gerar Financeiro?</label>
                                    <select class="form-input">
                                        <option>Sim</option>
                                        <option>Não</option>
                                    </select>
                                </div>
                                <div class="form-group col-4">
                                    <label class="form-label">Tipo do CFOP</label>
                                    <select class="form-input">
                                        <option>Entrada</option>
                                        <option>Saída</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeModal('fisCfopModal')">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('CFOP salvo!'); closeModal('fisCfopModal')">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 7. ICMS & TRIBUTOS -->
                <div id="fisIcmsModal" class="modal-overlay">
                    <div class="modal-card modal-lg"
                        style="max-width: 1100px; height:90vh; display:flex; flex-direction:column;">
                        <div class="modal-header">
                            <h3>Parâmetros de ICMS</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('fisIcmsModal')"><span
                                    class="material-icons-round">close</span></button>
                        </div>

                        <!-- Tabs -->
                        <div class="tabs-nav" style="margin-top:0;">
                            <button type="button" class="tab-btn active"
                                onclick="switchTab(this, 'tab-ricms-trib')">Tributos</button>
                            <button type="button" class="tab-btn"
                                onclick="switchTab(this, 'tab-ricms-trans-fil')">Transf. Filiais</button>
                            <button type="button" class="tab-btn"
                                onclick="switchTab(this, 'tab-ricms-trans-dep')">Transf. Depósitos</button>
                            <button type="button" class="tab-btn" onclick="switchTab(this, 'tab-ricms-ecf')">Cupom
                                Fiscal</button>
                            <button type="button" class="tab-btn" onclick="switchTab(this, 'tab-ricms-simples')">Simples
                                Nacional</button>
                        </div>

                        <div class="modal-body" style="overflow-y:auto;">
                            <!-- TAB: TRIBUTOS -->
                            <div id="tab-ricms-trib" class="tab-content active">
                                <h5 style="background:var(--bg-secondary); padding:0.5rem;">Contribuinte</h5>
                                <div class="row">
                                    <div class="form-group col-2"><label class="form-label">Cod. Tribut.</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-2"><label class="form-label">[%] ICMS NF</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-2"><label class="form-label">[%] ICMS Subs</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-2"><label class="form-label">% Base Red.</label><input
                                            class="form-input"></div>
                                </div>
                                <h5 style="background:var(--bg-secondary); padding:0.5rem; margin-top:1rem;">Não
                                    Contribuinte</h5>
                                <div class="row">
                                    <div class="form-group col-2"><label class="form-label">% Icm P.F.</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-2"><label class="form-label">CST</label><input
                                            class="form-input"></div>
                                </div>
                            </div>

                            <!-- TAB: TRANSF FILIAIS -->
                            <div id="tab-ricms-trans-fil" class="tab-content">
                                <div class="alert-info"><span>Configurações para transferência entre filiais da mesma
                                        empresa.</span></div>
                                <div class="row">
                                    <div class="form-group col-3"><label class="form-label">CFOP Estadual</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-3"><label class="form-label">CFOP Interest.</label><input
                                            class="form-input"></div>
                                </div>
                            </div>

                            <!-- TAB: TRANSF DEPÓSITOS -->
                            <div id="tab-ricms-trans-dep" class="tab-content">
                                <div class="alert-info"><span>Configurações para movimentação entre depósitos
                                        locais.</span></div>
                                <div class="row">
                                    <div class="form-group col-3"><label class="form-label">CFOP Saída</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-3"><label class="form-label">CFOP Entrada</label><input
                                            class="form-input"></div>
                                </div>
                            </div>

                            <!-- TAB: ECF -->
                            <div id="tab-ricms-ecf" class="tab-content">
                                <div class="row">
                                    <div class="form-group col-3"><label class="form-label">CFOP Est.</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-3"><label class="form-label">% ICMS</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-3"><label class="form-label">Sit. Tribut.</label><input
                                            class="form-input"></div>
                                </div>
                            </div>

                            <!-- TAB: SIMPLES NACIONAL -->
                            <div id="tab-ricms-simples" class="tab-content">
                                <h5 style="background:var(--bg-secondary); padding:0.5rem;">Clientes - Optantes do
                                    Simples</h5>
                                <div class="row">
                                    <div class="form-group col-2"><label class="form-label">[%] ICMS</label><input
                                            class="form-input"></div>
                                    <div class="form-group col-2"><label class="form-label">[%] IVA S.T.</label><input
                                            class="form-input" value="0,00"></div>
                                    <div class="form-group col-3"><label class="form-label">CSOSN
                                            Contribuinte</label><input class="form-input" value="000"></div>
                                </div>
                                <div class="row" style="margin-top:1rem;">
                                    <div class="col-12">
                                        <label class="check-label"><input type="radio" checked> Sim</label>
                                        <label class="check-label"><input type="radio"> Não</label>
                                        <span>Destaca S.T.?</span>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- End Modal Body -->

                        <div class="modal-footer">
                            <button class="btn btn-secondary" onclick="closeModal('fisIcmsModal')">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Parâmetros ICMS salvos!'); closeModal('fisIcmsModal')">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- Footer / LGPD Notice -->
                <footer class="app-footer">
                    <div>
                        <strong>&copy; 2026 Parreira ERP</strong> - Gestão Empresarial
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span class="material-icons-round"
                            style="font-size: 1rem; color: var(--accent-success);">security</span>
                        <span>Ambiente Seguro: Dados processados localmente em conformidade com a
                            LGPD.</span>
                    </div>
                    <div id="systemVersion" style="font-size: 0.8rem; color: #666; margin-left: auto;">
                        Carregando versão...
                    </div>
                </footer>

                <!-- ========================================== -->
                <!-- MODALS FINANCEIROS                         -->
                <!-- ========================================== -->

                <!-- 1. GRUPO -->
                <div id="finGroupModal" class="modal-overlay" style="display:none;">
                    <div class="modal-card"
                        style="background:var(--bg-card); border-radius:var(--radius-lg); max-width:500px; width:90%; max-height:90vh; overflow:auto;">
                        <div class="modal-header"
                            style="display:flex; justify-content:space-between; align-items:center; padding:1rem 1.5rem; border-bottom:1px solid var(--border-color);">
                            <h3 style="margin:0;">Cadastro de Grupo</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finGroupModal')"
                                style="background:transparent; border:none; cursor:pointer;">
                                <span class="material-icons-round" style="color:var(--text-secondary);">close</span>
                            </button>
                        </div>
                        <div class="modal-body" style="padding:1.5rem;">
                            <div style="display:grid; grid-template-columns:1fr 2fr; gap:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Código</label>
                                    <input type="text" class="form-input" placeholder="1001"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Grupo</label>
                                    <input type="text" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer"
                            style="display:flex; justify-content:flex-end; gap:1rem; padding:1rem 1.5rem; border-top:1px solid var(--border-color);">
                            <button type="button" onclick="closeModal('finGroupModal')"
                                style="padding:0.75rem 1.5rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary); cursor:pointer;">Cancelar</button>
                            <button type="button" id="btnSaveGroup"
                                style="padding:0.75rem 1.5rem; background:var(--primary-color); border:none; border-radius:var(--radius-md); color:white; cursor:pointer;">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 2. PLANO DE CONTAS -->
                <div id="finPlanModal" class="modal-overlay" style="display:none;">
                    <div class="modal-card"
                        style="background:var(--bg-card); border-radius:var(--radius-lg); max-width:700px; width:90%; max-height:90vh; overflow:auto;">
                        <div class="modal-header"
                            style="display:flex; justify-content:space-between; align-items:center; padding:1rem 1.5rem; border-bottom:1px solid var(--border-color);">
                            <h3 style="margin:0;">Plano de Contas</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finPlanModal')"
                                style="background:transparent; border:none; cursor:pointer;">
                                <span class="material-icons-round" style="color:var(--text-secondary);">close</span>
                            </button>
                        </div>
                        <div class="modal-body" style="padding:1.5rem;">
                            <div style="display:grid; grid-template-columns:1fr 3fr; gap:1rem; margin-bottom:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Código</label>
                                    <input type="text" class="form-input" placeholder="11010"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Conta</label>
                                    <input type="text" class="form-input"
                                        placeholder="RECEITAS COM VENDA DE MERCADORIAS"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin-bottom:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Conta
                                        Contábil</label>
                                    <input type="text" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Vl.
                                        Orçado</label>
                                    <input type="text" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                            <fieldset
                                style="border:1px solid var(--border-color); padding:1rem; border-radius:var(--radius-md);">
                                <legend style="padding:0 0.5rem; font-size:0.8rem; color:var(--text-secondary);">Tipo de
                                    Conta</legend>
                                <div style="display:flex; gap:1.5rem; flex-wrap:wrap;">
                                    <label
                                        style="display:flex; align-items:center; gap:0.5rem; cursor:pointer; color:var(--text-primary);"><input
                                            type="radio" name="accType" checked> Ativo</label>
                                    <label
                                        style="display:flex; align-items:center; gap:0.5rem; cursor:pointer; color:var(--text-primary);"><input
                                            type="radio" name="accType"> Receita</label>
                                    <label
                                        style="display:flex; align-items:center; gap:0.5rem; cursor:pointer; color:var(--text-primary);"><input
                                            type="radio" name="accType"> Despesa</label>
                                    <label
                                        style="display:flex; align-items:center; gap:0.5rem; cursor:pointer; color:var(--text-primary);"><input
                                            type="radio" name="accType"> Excluída</label>
                                </div>
                            </fieldset>
                        </div>
                        <div class="modal-footer"
                            style="display:flex; justify-content:flex-end; gap:1rem; padding:1rem 1.5rem; border-top:1px solid var(--border-color);">
                            <button class="btn btn-secondary" onclick="closeModal('finPlanModal')"
                                style="padding:0.75rem 1.5rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary); cursor:pointer;">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Plano de Contas salvo!'); closeModal('finPlanModal');"
                                style="padding:0.75rem 1.5rem; background:var(--primary-color); border:none; border-radius:var(--radius-md); color:white; cursor:pointer;">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 3. COBRANÇA -->
                <div id="finBillingModal" class="modal-overlay" style="display:none;">
                    <div class="modal-card"
                        style="background:var(--bg-card); border-radius:var(--radius-lg); max-width:800px; width:90%; max-height:90vh; overflow:auto;">
                        <div class="modal-header"
                            style="display:flex; justify-content:space-between; align-items:center; padding:1rem 1.5rem; border-bottom:1px solid var(--border-color);">
                            <h3 style="margin:0;">Cadastro de Cobrança</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finBillingModal')"
                                style="background:transparent; border:none; cursor:pointer;">
                                <span class="material-icons-round" style="color:var(--text-secondary);">close</span>
                            </button>
                        </div>
                        <div class="modal-body" style="padding:1.5rem;">
                            <div style="display:grid; grid-template-columns:1fr 3fr; gap:1rem; margin-bottom:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Código</label>
                                    <input type="text" class="form-input" placeholder="PIX"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Descrição</label>
                                    <input type="text" class="form-input" placeholder="PIX BANCO DO BRASIL"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                            <div style="display:grid; grid-template-columns:repeat(4, 1fr); gap:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Moeda</label>
                                    <input type="text" class="form-input" value="D"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Carência
                                        (dias)</label>
                                    <input type="number" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Dias
                                        Protesto</label>
                                    <input type="number" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">(%)
                                        Juros</label>
                                    <input type="text" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer"
                            style="display:flex; justify-content:flex-end; gap:1rem; padding:1rem 1.5rem; border-top:1px solid var(--border-color);">
                            <button class="btn btn-secondary" onclick="closeModal('finBillingModal')"
                                style="padding:0.75rem 1.5rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary); cursor:pointer;">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Cobrança salva!'); closeModal('finBillingModal');"
                                style="padding:0.75rem 1.5rem; background:var(--primary-color); border:none; border-radius:var(--radius-md); color:white; cursor:pointer;">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 4. PLANO DE PAGAMENTO -->
                <div id="finPayPlanModal" class="modal-overlay" style="display:none;">
                    <div class="modal-card"
                        style="background:var(--bg-card); border-radius:var(--radius-lg); max-width:600px; width:90%; max-height:90vh; overflow:auto;">
                        <div class="modal-header"
                            style="display:flex; justify-content:space-between; align-items:center; padding:1rem 1.5rem; border-bottom:1px solid var(--border-color);">
                            <h3 style="margin:0;">Plano de Pagamento</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finPayPlanModal')"
                                style="background:transparent; border:none; cursor:pointer;">
                                <span class="material-icons-round" style="color:var(--text-secondary);">close</span>
                            </button>
                        </div>
                        <div class="modal-body" style="padding:1.5rem;">
                            <div style="display:grid; grid-template-columns:1fr 3fr; gap:1rem; margin-bottom:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Código</label>
                                    <input type="text" class="form-input" placeholder="01"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Descrição</label>
                                    <input type="text" class="form-input" placeholder="À VISTA"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                            <div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Qtd.
                                        Parcelas</label>
                                    <input type="number" class="form-input" value="1"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Dias
                                        1ª Parcela</label>
                                    <input type="number" class="form-input" value="0"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Intervalo
                                        (dias)</label>
                                    <input type="number" class="form-input" value="30"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer"
                            style="display:flex; justify-content:flex-end; gap:1rem; padding:1rem 1.5rem; border-top:1px solid var(--border-color);">
                            <button class="btn btn-secondary" onclick="closeModal('finPayPlanModal')"
                                style="padding:0.75rem 1.5rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary); cursor:pointer;">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Plano de Pagamento salvo!'); closeModal('finPayPlanModal');"
                                style="padding:0.75rem 1.5rem; background:var(--primary-color); border:none; border-radius:var(--radius-md); color:white; cursor:pointer;">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 5. CAIXAS E BANCOS -->
                <div id="finBankModal" class="modal-overlay" style="display:none;">
                    <div class="modal-card"
                        style="background:var(--bg-card); border-radius:var(--radius-lg); max-width:700px; width:90%; max-height:90vh; overflow:auto;">
                        <div class="modal-header"
                            style="display:flex; justify-content:space-between; align-items:center; padding:1rem 1.5rem; border-bottom:1px solid var(--border-color);">
                            <h3 style="margin:0;">Caixas e Bancos</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('finBankModal')"
                                style="background:transparent; border:none; cursor:pointer;">
                                <span class="material-icons-round" style="color:var(--text-secondary);">close</span>
                            </button>
                        </div>
                        <div class="modal-body" style="padding:1.5rem;">
                            <div style="display:grid; grid-template-columns:1fr 3fr 1fr; gap:1rem; margin-bottom:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Código</label>
                                    <input type="text" class="form-input" placeholder="6"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Descrição</label>
                                    <input type="text" class="form-input" placeholder="BANCO DO BRASIL"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Banco</label>
                                    <input type="text" class="form-input" placeholder="001"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                            <div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Agência</label>
                                    <input type="text" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Conta</label>
                                    <input type="text" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Dígito</label>
                                    <input type="text" class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer"
                            style="display:flex; justify-content:flex-end; gap:1rem; padding:1rem 1.5rem; border-top:1px solid var(--border-color);">
                            <button class="btn btn-secondary" onclick="closeModal('finBankModal')"
                                style="padding:0.75rem 1.5rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary); cursor:pointer;">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Caixa/Banco salvo!'); closeModal('finBankModal');"
                                style="padding:0.75rem 1.5rem; background:var(--primary-color); border:none; border-radius:var(--radius-md); color:white; cursor:pointer;">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- ========================================== -->
                <!-- MODALS FISCAIS                             -->
                <!-- ========================================== -->

                <!-- 6. CFOP -->
                <div id="fisCfopModal" class="modal-overlay" style="display:none;">
                    <div class="modal-card"
                        style="background:var(--bg-card); border-radius:var(--radius-lg); max-width:600px; width:90%; max-height:90vh; overflow:auto;">
                        <div class="modal-header"
                            style="display:flex; justify-content:space-between; align-items:center; padding:1rem 1.5rem; border-bottom:1px solid var(--border-color);">
                            <h3 style="margin:0;">Cadastro CFOP</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('fisCfopModal')"
                                style="background:transparent; border:none; cursor:pointer;">
                                <span class="material-icons-round" style="color:var(--text-secondary);">close</span>
                            </button>
                        </div>
                        <div class="modal-body" style="padding:1.5rem;">
                            <div style="display:grid; grid-template-columns:1fr 3fr; gap:1rem; margin-bottom:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">CFOP</label>
                                    <input type="text" class="form-input" placeholder="5102"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Descrição</label>
                                    <input type="text" class="form-input" placeholder="Venda de mercadoria adquirida"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label"
                                    style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Observação
                                    Fiscal</label>
                                <textarea class="form-input" rows="3"
                                    style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary); resize:vertical;"></textarea>
                            </div>
                        </div>
                        <div class="modal-footer"
                            style="display:flex; justify-content:flex-end; gap:1rem; padding:1rem 1.5rem; border-top:1px solid var(--border-color);">
                            <button class="btn btn-secondary" onclick="closeModal('fisCfopModal')"
                                style="padding:0.75rem 1.5rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary); cursor:pointer;">Cancelar</button>
                            <button class="btn btn-primary" onclick="alert('CFOP salvo!'); closeModal('fisCfopModal');"
                                style="padding:0.75rem 1.5rem; background:var(--primary-color); border:none; border-radius:var(--radius-md); color:white; cursor:pointer;">Salvar</button>
                        </div>
                    </div>
                </div>

                <!-- 7. PARÂMETROS ICMS -->
                <div id="fisIcmsModal" class="modal-overlay" style="display:none;">
                    <div class="modal-card"
                        style="background:var(--bg-card); border-radius:var(--radius-lg); max-width:700px; width:90%; max-height:90vh; overflow:auto;">
                        <div class="modal-header"
                            style="display:flex; justify-content:space-between; align-items:center; padding:1rem 1.5rem; border-bottom:1px solid var(--border-color);">
                            <h3 style="margin:0;">Parâmetros ICMS</h3>
                            <button class="btn btn-secondary btn-icon" onclick="closeModal('fisIcmsModal')"
                                style="background:transparent; border:none; cursor:pointer;">
                                <span class="material-icons-round" style="color:var(--text-secondary);">close</span>
                            </button>
                        </div>
                        <div class="modal-body" style="padding:1.5rem;">
                            <div
                                style="display:grid; grid-template-columns:repeat(3, 1fr); gap:1rem; margin-bottom:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">UF
                                        Origem</label>
                                    <select class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                        <option>PA</option>
                                        <option>SP</option>
                                        <option>RJ</option>
                                        <option>MG</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">UF
                                        Destino</label>
                                    <select class="form-input"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                        <option>SP</option>
                                        <option>PA</option>
                                        <option>RJ</option>
                                        <option>MG</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Alíquota
                                        ICMS (%)</label>
                                    <input type="text" class="form-input" placeholder="12"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                            <div style="display:grid; grid-template-columns:repeat(2, 1fr); gap:1rem;">
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">Base
                                        de Cálculo (%)</label>
                                    <input type="text" class="form-input" placeholder="100"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label class="form-label"
                                        style="display:block; margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.875rem;">CST</label>
                                    <input type="text" class="form-input" placeholder="00"
                                        style="width:100%; padding:0.75rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary);">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer"
                            style="display:flex; justify-content:flex-end; gap:1rem; padding:1rem 1.5rem; border-top:1px solid var(--border-color);">
                            <button class="btn btn-secondary" onclick="closeModal('fisIcmsModal')"
                                style="padding:0.75rem 1.5rem; background:var(--bg-body); border:1px solid var(--border-color); border-radius:var(--radius-md); color:var(--text-primary); cursor:pointer;">Cancelar</button>
                            <button class="btn btn-primary"
                                onclick="alert('Parâmetros ICMS salvos!'); closeModal('fisIcmsModal');"
                                style="padding:0.75rem 1.5rem; background:var(--primary-color); border:none; border-radius:var(--radius-md); color:white; cursor:pointer;">Salvar</button>
                        </div>
                    </div>
                </div>

        </main>
    </div>

    <!-- Scripts -->
    <!-- Basic Firebase for Auth -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="../../core/js/firebase-config.js"></script>

    <script src="js/cnpj-lookup.js"></script>
    <script src="js/cadastros.js"></script>
    <script type="module" src="js/app.js?v=2.5.8"></script>
</body>

</html>